## adLoginGetBearerToken
---

### Syntax
  ```
  cy.adLoginGetBearerToken(marketplace, options)
  ```

### Usage
  ```
  cy.adLoginGetBearerToken('APPDIRECT')
  ```

### Arguments
`marketplace` (string) - The Marketplace tenant name as defined by the environment variable. Ref. AdLoginStatic.getMarketplaceEnvInfo() for environment variables information.

`options` (object) - key:value collection for the following optional parameters:

  | Option           | Default              | Description           |
  |------------------|----------------------|-----------------------|
  | oauth2GrantType  | 'client_credentials' | The grant type        |
  | oauth2Scopes     | ['ROLE_PARTNER']     | Scope list definition |

### Yields
`.adLoginGetBearerToken()` yields the same subject it was given from the previous command.

### Notes
- Requires a Bearer token from the given Marketplace.  Once required and retrived then it may be retrieved and used by using "cy.adLoginWithBearerToken().then()"
- The Marketplace API client must be set with the following setup (in UI):
  - Client Type: Non Interactive Setup

- In order to test the Marketplace API Client:

  ```
  curl -X POST
  -H "AD-Tenant: ${tenant}"
  "${mp_url}/oauth2/token?grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}&scope=ROLE_PARTNER"
  ```

## adLoginWithBearerToken
---

### Syntax
  ```
  cy.adLoginWithBearerToken(marketplace)
  ```

### Usage
  ```
  cy
    .adLoginWithBearerToken('MTTTEST2')
    .then(function(token) {
      .
      .
      .
    });
  ```

### Arguments
`marketplace` (string) - The Marketplace tenant name as defined by the environment variable. Ref. AdLoginStatic.getMarketplaceEnvInfo() for environment variables information.

### Yields
`.adLoginWithBearerToken()` yields the token to use with authentication.

## adLoginApi
---
### Syntax
  ```
  cy.adLoginApi(marketplace, options)
  ```

### Usage
  ```
  const options = {
    username: this.username,
    password: this.password
  }

  cy
    .adLoginApi('MTTTEST2', options)
    .then(function(token) {
      .
      .
      .
    });
  ```

### Arguments
`marketplace` (string) - The Marketplace tenant name as defined by the environment variable. Ref. AdLoginStatic.getMarketplaceEnvInfo() for environment variables information.

  | Option            | Default                                       | Description                                                                                         |
  |-------------------|-----------------------------------------------|-----------------------------------------------------------------------------------------------------|
  | username          | CYPRESS_\<marketplace>_USERNAME                | The username to use to authenticate and open a session, default is defined by environment variable. |
  | password          | CYPRESS_\<marketplace>_PASSWORD                | The password associated to the username, default will be defined by the environment variable.       |
  | tenant            | CYPRESS_\<marketplace>_TENANT \|\| 'APPDIRECT' | The tenant to use with the given marketplace, default is defined by the environment variable.       |
  | baseUrl           | CYPRESS_\<marketplace>_BASE_URL                | The baseUrl to use with the APIs. Default will be defined by the environment variable.              |
  | continuationState | null                                          | The continuationState to use with the IAM authentication endpoint.                                  |

### Yields
`.adLoginWithBearerToken()` yields an `AdLoginApiContract` object which contains information from API responses.
